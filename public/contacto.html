<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto - Colegio de Profesionales en Turismo</title>
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="/" class="navbar-brand">
                <img src="https://cptba.com.ar/wp-content/uploads/2022/07/Logo-nuevo-con-blanco.png" alt="Logo CPTBA" class="navbar-logo">
            </a>
            <button class="navbar-toggle" onclick="toggleMenu()" type="button">☰</button>
            
            <ul class="navbar-menu" id="navMenu">
                <li><a href="/">Inicio</a></li>
                <li><a href="/el-colegio.html">El Colegio</a></li>
                <li><a href="/noticias.html">Noticias</a></li>
                <li><a href="/comision.html">Comisión Directiva</a></li>
                <li><a href="/matriculacion.html">Matriculación</a></li>
                <li><a href="/matriculados.html">Matriculados</a></li>
                <li><a href="/contacto.html" class="active">Contacto</a></li>
                <li><a href="/admin.html" class="btn-admin">Admin</a></li>
            </ul>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <h1 class="section-title">¡Estamos en contacto!</h1>
            <p class="section-subtitle">Completando este formulario serás dirigido al área correspondiente y en breve serás contactado.</p>
            
            <div style="max-width: 700px; margin: 0 auto;">
                <div class="card">
                    <div class="card-content">
                        <form id="contactoForm" style="display: grid; gap: 20px;">
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div>
                                    <label style="display:block; margin-bottom:5px; font-weight:600;">Nombre *</label>
                                    <input type="text" name="nombre" class="form-control" placeholder="Juan Agustín" required>
                                </div>
                                <div>
                                    <label style="display:block; margin-bottom:5px; font-weight:600;">Apellido *</label>
                                    <input type="text" name="apellido" class="form-control" placeholder="Gomez" required>
                                </div>
                            </div>

                            <div>
                                <label style="display:block; margin-bottom:5px; font-weight:600;">Correo electrónico *</label>
                                <input type="email" name="email" class="form-control" placeholder="ej: juan@doe.com" required>
                            </div>

                            <div>
                                <label style="display:block; margin-bottom:5px; font-weight:600;">Seleccione su consulta: *</label>
                                <select name="consulta" class="form-control" required>
                                    <option value="" disabled selected>Seleccione una opción...</option>
                                    <option value="Matriculación">Matriculación</option>
                                    <option value="Cursos y Capacitación">Cursos y Capacitación</option>
                                    <option value="Institucional">Institucional</option>
                                    <option value="Otro">Otro</option>
                                </select>
                            </div>

                            <div>
                                <label style="display:block; margin-bottom:5px; font-weight:600;">Asunto *</label>
                                <input type="text" name="asunto" class="form-control" placeholder="El asunto de su contacto" required>
                            </div>

                            <div>
                                <label style="display:block; margin-bottom:5px; font-weight:600;">Su mensaje *</label>
                                <textarea name="mensaje" class="form-control" rows="6" placeholder="Inserte aquí su mensaje" required style="resize: vertical;"></textarea>
                            </div>

                            <div id="mensaje-estado" style="display: none; padding: 15px; border-radius: 8px; font-weight: 500; text-align: center; border: 1px solid transparent;"></div>

                            <div style="text-align: left;">
                                <button type="submit" class="btn btn-primary" id="btnEnviar">Enviar mensaje</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="https://cptba.com.ar/wp-content/uploads/2022/07/Logo-nuevo-con-blanco.png" alt="Logo CPTBA">
                </div>
                <div class="footer-info">
                    <p>&copy; 2026 Colegio de Profesionales en Turismo de la Pcia. de Bs. As.</p>
                    <p>Todos los derechos reservados.</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function toggleMenu() {
            document.getElementById('navMenu').classList.toggle('active');
        }

        const formulario = document.getElementById('contactoForm');
        const mensajeEstado = document.getElementById('mensaje-estado');
        const btnEnviar = document.getElementById('btnEnviar');

        formulario.addEventListener('submit', async (e) => {
            e.preventDefault(); 
            
            btnEnviar.innerText = 'Enviando...';
            btnEnviar.disabled = true;
            mensajeEstado.style.display = 'none';

            const formData = new FormData(formulario);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch('/enviar-contacto', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok && result.success) {
                    mensajeEstado.style.display = 'block';
                    mensajeEstado.style.backgroundColor = '#dcfce7'; 
                    mensajeEstado.style.color = '#166534';
                    mensajeEstado.style.borderColor = '#bbf7d0';
                    mensajeEstado.innerText = '✅ ¡Gracias! Tu mensaje ha sido enviado correctamente.';
                    formulario.reset(); 
                } else {
                    throw new Error(result.message || 'Error en el servidor');
                }
            } catch (error) {
                mensajeEstado.style.display = 'block';
                mensajeEstado.style.backgroundColor = '#fee2e2';
                mensajeEstado.style.color = '#991b1b';
                mensajeEstado.style.borderColor = '#fecaca';
                mensajeEstado.innerText = '❌ Error al enviar. Por favor intente más tarde.';
                console.error(error);
            } finally {
                btnEnviar.innerText = 'Enviar mensaje';
                btnEnviar.disabled = false;
            }
        });
    </script>
</body>
</html>